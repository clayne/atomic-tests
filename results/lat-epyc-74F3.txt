# AMD EPYC 74F3 24-Core Processor
# CPUs 0-23=thread0, CPUs 24-47=thread1
# There are only 3 cores per L3, each time adjacent CPUs (and their siblings).
# The inter-core timings are 3 times those of the 2016 Xeon W2145 and twice
# those of a Ryzen 2700X.
# inter-thread lat is ~8ns
# intra-L3 lat is ~20ns
# inter-L3 lat is ~108-125ns with a clear boundary between CPUs 0-11 and 12-23
# possibly indicating two dies.

$ ./thr-lat.sh $(seq 0 24)
#Op=2    0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24
     0   -  20  19 123 123 108 129 127 129 106 105 106 125 127 125 114 122 125 126 124 123 126 124 125   8
     1  20   -  23 122 122 121 126 105 126 125 104 127 124 126 124 115 125 116 123 125 124 125 125 124  20
     2  19  24   - 121 109 122 129 108 106 107 125 105 120 127 119 114 124 116 126 126 125 124 126 125  19
     3 121 108 121   -  23  25 130 128 130 129 128 129 121 121 118 125 127 126 127 127 125 127 127 125 109
     4 123 108 123  23   -  24 107 108 130 108 107 107 121 127 120 125 127 118 128 126 125 127 127 127 123
     5 122 107 108  23  24   - 130 128 108 107 106 105 120 120 127 124 124 125 126 126 124 125 127 126 108
     6 108 107 108 109 108 107   -  23  24 130 100 130 125 127 126 124 124 125 128 128 120 128 121 120 129
     7 108 107 108 131 130 130  23   -  22 130 129 131 127 128 125 124 126 125 121 129 119 129 127 128 129
     8 108 128 108 108 129 129  24  22   - 129 100 101 127 125 127 124 125 124 127 129 120 129 121 120 129
     9 128 127 128 129 129 128 130 130 130   -  20  19 124 124 123 122 123 121 120 120 126 120 125 126 128
    10 105 126 105 106 128 127  99 129 100  20   -  23 125 125 124 121 123 120 126 126 118 126 125 125 127
    11 128 127 105 107 129 105 130 101 101  19  23   - 124 126 123 120 124 123 120 127 118 119 127 118 106
    12 126 118 118 121 129 120 127 127 127 124 125 125   -  23  23 126 101 129 109 131 130 107 109 108 127
    13 127 126 128 129 121 120 127 127 127 124 125 126  23   -  24 127 130 100 131 109 108 131 131 130 125
    14 119 125 127 118 126 117 126 125 125 125 122 125  23  24   -  97 100 128 130 107 107 108 108 127 119
    15 120 123 124 125 123 117 124 122 124 121 119 120  99  99  98   -  18  18 106 106 105 125 125 105 124
    16 126 125 118 119 127 126 126 126 124 124 123 124 101 130 100  19   -  20 127 107 106 107 129 128 124
    17 125 124 125 126 118 123 125 124 125 123 122 123  98 100 127  18  20   - 128 104 127 106 128 127 117
    18 126 125 126 127 127 127 129 129 128 127 126 119 130 109 108 127 129 128   -  23  25 109 110 123 126
    19 126 125 126 127 125 127 121 127 129 127 126 119 108 109 130 127 129 128  23   -  24 123 124 123 126
    20 124 124 125 127 126 126 128 128 128 127 117 125 130 108 107 105 128 127  24  24   - 108 123 122 125
    21 126 125 126 127 127 127 121 127 121 120 118 125 129 131 108 106 129 106 124 110 108   -  23  25 124
    22 126 125 126 128 127 127 129 127 121 118 117 119 109 108 107 105 107 106 109 123 123  23   -  23 126
    23 123 124 123 127 127 126 126 126 128 119 118 117 130 108 107 105 126 105 122 110 123  24  24   - 125
    24   8  19  19 121 109 120 127 108 108 106 127 106 127 118 127 124 118 125 126 126 125 126 124 125   -

#Op=3    0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21  22  23  24
     0   -  22  26 248 249 247 261 261 219 217 216 217 240 241 240 235 238 251 249 249 249 248 248 247  28
     1  22   -  30 219 247 218 260 260 214 258 257 216 238 238 251 234 237 236 248 247 248 248 248 246  21
     2  30  31   - 249 221 248 260 261 219 257 259 260 253 240 253 251 238 236 249 249 247 248 248 248  21
     3 220 246 220   -  31  35 262 220 262 218 217 218 254 241 254 251 255 253 251 251 249 251 251 249 248
     4 249 219 249  31   -  28 220 221 263 261 260 219 255 255 241 252 255 254 251 250 249 251 251 251 221
     5 220 218 244  34  28   - 262 262 220 260 259 218 253 241 240 236 239 253 249 251 250 249 249 248 220
     6 261 260 262 262 220 219   -  31  28 206 261 262 251 249 250 249 251 249 241 242 254 255 256 255 260
     7 220 217 220 263 221 220  31   -  22 262 261 263 250 253 252 249 252 250 241 256 255 242 257 242 260
     8 219 260 262 263 220 220  29  22   - 263 204 206 252 253 251 249 250 251 252 242 252 254 242 241 219
     9 260 258 217 218 261 261 263 263 264   -  19  32 252 252 249 247 250 248 254 254 239 240 240 239 217
    10 216 214 258 218 218 217 205 205 205  22   -  30 248 250 249 247 247 248 253 253 253 253 253 238 258
    11 217 258 217 216 219 218 263 264 207  23  30   - 250 250 249 248 249 249 240 241 253 254 238 254 260
    12 253 239 240 254 242 241 252 253 250 251 251 249   -  31  34 201 205 260 220 220 260 220 220 260 252
    13 253 238 253 242 254 241 254 251 251 252 251 252  31   -  28 260 263 261 220 221 220 262 221 220 253
    14 239 237 252 254 254 241 247 253 250 250 250 251  35  28   - 201 205 203 220 261 219 220 220 219 252
    15 251 250 236 252 237 252 249 249 248 248 246 248 203 260 201   -  26  23 216 258 257 216 258 215 250
    16 253 251 253 240 254 253 252 250 250 250 248 251 206 206 261  29   -  25 261 261 260 261 261 218 253
    17 236 250 251 239 253 238 249 251 251 248 248 248 261 261 260  23  24   - 260 260 217 216 259 217 237
    18 248 248 249 248 248 250 240 241 256 255 238 255 261 261 260 256 218 217   -  31  36 222 251 222 248
    19 249 247 249 251 251 249 241 257 241 255 239 240 220 220 220 217 219 260  31   -  28 251 251 250 250
    20 249 247 249 250 249 250 240 241 241 255 254 239 220 261 219 258 260 259  34  27   - 250 222 248 248
    21 248 248 249 251 249 250 241 241 254 239 253 240 220 220 219 216 261 260 222 251 218   -  31  36 248
    22 250 247 250 250 251 249 241 257 241 239 255 255 220 221 261 259 261 260 223 251 250  31   -  28 249
    23 249 248 248 249 249 250 240 256 241 255 254 239 261 220 260 258 260 259 250 223 221  35  27   - 248
    24  28  19  32 221 217 219 261 261 261 259 258 217 252 240 238 235 253 251 248 248 248 248 246 247   -

$ lscpu -e
CPU NODE SOCKET CORE L1d:L1i:L2:L3 ONLINE    MAXMHZ    MINMHZ
  0    0      0    0 0:0:0:0          yes 3200.0000 1500.0000
  1    0      0    1 1:1:1:0          yes 3200.0000 1500.0000
  2    0      0    2 2:2:2:0          yes 3200.0000 1500.0000
  3    0      0    3 3:3:3:1          yes 3200.0000 1500.0000
  4    0      0    4 4:4:4:1          yes 3200.0000 1500.0000
  5    0      0    5 5:5:5:1          yes 3200.0000 1500.0000
  6    0      0    6 6:6:6:2          yes 3200.0000 1500.0000
  7    0      0    7 7:7:7:2          yes 3200.0000 1500.0000
  8    0      0    8 8:8:8:2          yes 3200.0000 1500.0000
  9    0      0    9 9:9:9:3          yes 3200.0000 1500.0000
 10    0      0   10 10:10:10:3       yes 3200.0000 1500.0000
 11    0      0   11 11:11:11:3       yes 3200.0000 1500.0000
 12    0      0   12 12:12:12:4       yes 3200.0000 1500.0000
 13    0      0   13 13:13:13:4       yes 3200.0000 1500.0000
 14    0      0   14 14:14:14:4       yes 3200.0000 1500.0000
 15    0      0   15 15:15:15:5       yes 3200.0000 1500.0000
 16    0      0   16 16:16:16:5       yes 3200.0000 1500.0000
 17    0      0   17 17:17:17:5       yes 3200.0000 1500.0000
 18    0      0   18 18:18:18:6       yes 3200.0000 1500.0000
 19    0      0   19 19:19:19:6       yes 3200.0000 1500.0000
 20    0      0   20 20:20:20:6       yes 3200.0000 1500.0000
 21    0      0   21 21:21:21:7       yes 3200.0000 1500.0000
 22    0      0   22 22:22:22:7       yes 3200.0000 1500.0000
 23    0      0   23 23:23:23:7       yes 3200.0000 1500.0000
 24    0      0    0 0:0:0:0          yes 3200.0000 1500.0000
 25    0      0    1 1:1:1:0          yes 3200.0000 1500.0000
 26    0      0    2 2:2:2:0          yes 3200.0000 1500.0000
 27    0      0    3 3:3:3:1          yes 3200.0000 1500.0000
 28    0      0    4 4:4:4:1          yes 3200.0000 1500.0000
 29    0      0    5 5:5:5:1          yes 3200.0000 1500.0000
 30    0      0    6 6:6:6:2          yes 3200.0000 1500.0000
 31    0      0    7 7:7:7:2          yes 3200.0000 1500.0000
 32    0      0    8 8:8:8:2          yes 3200.0000 1500.0000
 33    0      0    9 9:9:9:3          yes 3200.0000 1500.0000
 34    0      0   10 10:10:10:3       yes 3200.0000 1500.0000
 35    0      0   11 11:11:11:3       yes 3200.0000 1500.0000
 36    0      0   12 12:12:12:4       yes 3200.0000 1500.0000
 37    0      0   13 13:13:13:4       yes 3200.0000 1500.0000
 38    0      0   14 14:14:14:4       yes 3200.0000 1500.0000
 39    0      0   15 15:15:15:5       yes 3200.0000 1500.0000
 40    0      0   16 16:16:16:5       yes 3200.0000 1500.0000
 41    0      0   17 17:17:17:5       yes 3200.0000 1500.0000
 42    0      0   18 18:18:18:6       yes 3200.0000 1500.0000
 43    0      0   19 19:19:19:6       yes 3200.0000 1500.0000
 44    0      0   20 20:20:20:6       yes 3200.0000 1500.0000
 45    0      0   21 21:21:21:7       yes 3200.0000 1500.0000
 46    0      0   22 22:22:22:7       yes 3200.0000 1500.0000
 47    0      0   23 23:23:23:7       yes 3200.0000 1500.0000
